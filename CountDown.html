<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TEMPORIZADOR</title>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    background: #f0f0f5;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 5vh 2vw;
    height: 100vh;
    justify-content: center;
    text-align: center;
  }

  h1 {
    font-size: 2rem;
    color: #333;
  }

  .picker-container {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
  }

  select {
    width: 15vw;
    max-width: 100px;
    height: 10vh;
    font-size: 1.5rem;
    text-align: center;
    border-radius: 10px;
    background: white;
  }

  .buttons-container {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
    /*margin-top: 2vh;*/
    width: 100%;
    max-width: 400px;
  }

  button {
    background-color: #007aff;
    border: none;
    color: white;
    font-size: 1.2rem;
    padding: 0.7rem 2rem;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.3s;
    flex: 1;
    text-align: center;

  }

  
  button:disabled {
    background-color: #aaa;
    cursor: not-allowed;
  }
  button:hover:not(:disabled) {
    background-color: #005bb5;
  }

  .countdown {
    font-size: 3rem;
    font-weight: bold;
    color: #222;
    margin-top: 2vh;
  }

  @media (max-width: 600px) {
    h1 { font-size: 1.5rem; }
    select { width: 25vw; height: 8vh; font-size: 1.2rem; }
    button { font-size: 1rem; padding: 0.5rem 1.5rem; }
    .countdown { font-size: 2rem; }
  }
</style>
</head>
<body>

<h1>Temporizador Regresivo</h1>

<div class="picker-container">
  <label for="hours">Horas
    <select id="hours"></select>
  </label>
  <label for="minutes">Minutos
    <select id="minutes"></select>
  </label>
</div>

<div class="buttons-container">
  <button id="startBtn">Iniciar</button>
  <button id="stopBtn" disabled>Detener</button>
  <button id="clearBtn" disabled>Limpiar</button>
</div>

<div class="countdown" id="countdownDisplay" style="display:none;">
  <span id="displayHours">00</span> :
  <span id="displayMinutes">00</span> :
  <span id="displaySeconds">00</span>
</div>

<audio id="alarmSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto"></audio>

<script>
  const hoursSelect = document.getElementById('hours');
  const minutesSelect = document.getElementById('minutes');
  const startBtn = document.getElementById('startBtn');
  const stopBtn = document.getElementById('stopBtn');
  const clearBtn = document.getElementById('clearBtn');
  const countdownDisplay = document.getElementById('countdownDisplay');
  const displayHours = document.getElementById('displayHours');
  const displayMinutes = document.getElementById('displayMinutes');
  const displaySeconds = document.getElementById('displaySeconds');
  const alarmSound = document.getElementById('alarmSound');

  let countdownInterval = null;
  let totalSeconds = 0;

  for(let h=0; h<=23; h++) {
    hoursSelect.innerHTML += `<option value="${h}">${h.toString().padStart(2, '0')}</option>`;
  }

  for(let m=0; m<=59; m++) {
    minutesSelect.innerHTML += `<option value="${m}">${m.toString().padStart(2, '0')}</option>`;
  }

  function updateDisplay(seconds) {
    const hrs = Math.floor(seconds / 3600);
    const mins = Math.floor((seconds % 3600) / 60);
    const secs = seconds % 60;
    displayHours.textContent = hrs.toString().padStart(2, '0');
    displayMinutes.textContent = mins.toString().padStart(2, '0');
    displaySeconds.textContent = secs.toString().padStart(2, '0');
  }

  function startCountdown() {
    totalSeconds = parseInt(hoursSelect.value) * 3600 + parseInt(minutesSelect.value) * 60;

    if(totalSeconds <= 0) {
      alert('Selecciona un tiempo mayor a 0.');
      return;
    }

    countdownDisplay.style.display = 'block';
    startBtn.disabled = true;
    stopBtn.disabled = false;
    clearBtn.disabled = true;
    hoursSelect.disabled = true;
    minutesSelect.disabled = true;

    updateDisplay(totalSeconds);

    countdownInterval = setInterval(() => {
      totalSeconds--;
      updateDisplay(totalSeconds);

      if(totalSeconds <= 0) {
        clearInterval(countdownInterval);
        alarmSound.play();
        alert('Â¡Tiempo terminado!');
        resetControls();
      }
    }, 1000);
  }

  function stopCountdown() {
    clearInterval(countdownInterval);
    stopBtn.disabled = true;
    clearBtn.disabled = false;
  }

  function clearCountdown() {
    totalSeconds = 0;
    updateDisplay(0);
    countdownDisplay.style.display = 'none';
    startBtn.disabled = false;
    stopBtn.disabled = true;
    clearBtn.disabled = true;
    hoursSelect.disabled = false;
    minutesSelect.disabled = false;
  }

  function resetControls() {
    startBtn.disabled = false;
    stopBtn.disabled = true;
    clearBtn.disabled = true;
    hoursSelect.disabled = false;
    minutesSelect.disabled = false;
  }

  startBtn.addEventListener('click', startCountdown);
  stopBtn.addEventListener('click', stopCountdown);
  clearBtn.addEventListener('click', clearCountdown);
</script>

</body>
</html>